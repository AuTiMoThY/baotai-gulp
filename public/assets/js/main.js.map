{"version":3,"file":"main.js","sources":["../../../src/js/modules/pageBanner.js","../../../src/js/modules/pageTitle.js","../../../src/js/modules/common/isMobile.js","../../../src/js/modules/common/headerScroll.js","../../../src/js/modules/common/resourcesLoading.js","../../../src/js/main.js"],"sourcesContent":["export const pageBanner = {\r\n    bannerAniRepeat(bodyClass) {\r\n        const tl = gsap.timeline({\r\n            yoyo: true,\r\n            repeat: -1\r\n        });\r\n        tl.fromTo(\r\n            `${bodyClass} .banner-box .img-box img`,\r\n            { scale: 1 },\r\n            { duration: 15, ease: \"power1.inOut\", scale: 1.25 }\r\n        );\r\n    },\r\n\r\n    bannerAni(bodyClass) {\r\n        const tl = gsap.timeline({\r\n            onComplete: () => this.bannerAniRepeat(bodyClass)\r\n        });\r\n        tl.from(`${bodyClass} .banner-box .img-box img`, {\r\n            scale: 1.3,\r\n            opacity: 0,\r\n            duration: 7,\r\n            // ease: \"power1.inOut\"\r\n        });\r\n    }\r\n};\r\n","export const pageTitle = {\r\n    titleAni(bodyClass, callback) {\r\n        const zhSplit = SplitText.create(`${bodyClass} .title-box .top .zh`, {\r\n            type: \"chars,words,lines\",\r\n            linesClass: \"clip-text\"\r\n        });\r\n\r\n        const enSplit = SplitText.create(\r\n            `${bodyClass} .title-box .bottom .en`,\r\n            {\r\n                type: \"chars,words,lines\",\r\n                linesClass: \"clip-text\"\r\n            }\r\n        );\r\n        let tl = gsap.timeline({\r\n            scrollTrigger: {\r\n                // markers: true,\r\n                trigger: `${bodyClass} .title-box`,\r\n                start: \"top 75%\",\r\n                once: true,\r\n                toggleActions: \"play none none reverse\"\r\n            }\r\n        });\r\n\r\n        tl.from(zhSplit.chars, {\r\n            duration: 1,\r\n            opacity: 0,\r\n            stagger: 0.1,\r\n            y: 80\r\n        })\r\n            .fromTo(\r\n                enSplit.chars,\r\n                {\r\n                    opacity: 0,\r\n                    rotationY: 180,\r\n                    yPercent: 100\r\n                },\r\n                {\r\n                    duration: 1,\r\n                    opacity: 1,\r\n                    rotationY: 0,\r\n                    yPercent: 0,\r\n                    stagger: 0.03\r\n                },\r\n                \"<0.3\"\r\n            )\r\n\r\n            .from(\r\n                `${bodyClass} .title-box .top .line`,\r\n                { duration: 1, width: \"0\", opacity: 0 },\r\n                \"<0.45\"\r\n            )\r\n            .call(\r\n                function () {\r\n                    // 提前 1 秒觸發的 callback\r\n                    // console.log(\"提前 1 秒觸發\", this);\r\n                    callback && callback();\r\n                },\r\n                null,\r\n                \"-=1\"\r\n            );\r\n    }\r\n};\r\n","export const isMobile = () => {\r\n    return window.matchMedia(\"(max-width: 1024px)\").matches;\r\n}","export const headerScroll = {\r\n    init() {\r\n        window.addEventListener(\"scroll\", function () {\r\n            const header = document.querySelector(\".header\");\r\n\r\n            if (window.scrollY > 50) {\r\n                header.classList.add(\"transparent\");\r\n            } else {\r\n                header.classList.remove(\"transparent\");\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\n","export const resourcesLoading = (callback) => {\r\n    const loadingScreen = document.querySelector(\".loading-screen\");\r\n    const loadingText = document.getElementById(\"loading-text\");\r\n\r\n    if (!loadingScreen) {\r\n        gsap.delayedCall(0.5, () => {\r\n            if (typeof callback === 'function') {\r\n                callback();\r\n            }\r\n        });\r\n        return;\r\n    }\r\n\r\n    const images = Array.from(document.images);\r\n    const videos = Array.from(document.querySelectorAll(\"video\"));\r\n    const resources = [...images, ...videos]; // 統一資源陣列\r\n    const totalResources = resources.length;\r\n    console.log(resources);\r\n    console.log(totalResources);\r\n    let loadedResources = 0;\r\n    let currentDisplayPercent = 0; // 追蹤當前顯示的百分比\r\n    let progressTween = null; // 追蹤當前的動畫實例\r\n\r\n    // 更新百分比函數\r\n    function updateProgress() {\r\n        let targetPercent =\r\n            totalResources === 0\r\n                ? 100\r\n                : Math.floor((loadedResources / totalResources) * 100);\r\n        // console.log(targetPercent);\r\n\r\n        // 如果已經有動畫在運行，先停止它\r\n        if (progressTween) {\r\n            progressTween.kill();\r\n        }\r\n\r\n        // 創建動畫對象\r\n        const progressObj = { value: currentDisplayPercent };\r\n\r\n        // 使用 GSAP 動畫從當前值到目標值\r\n        progressTween = gsap.to(progressObj, {\r\n            value: targetPercent,\r\n            duration: 0.5,\r\n            ease: \"power1.out\",\r\n            onUpdate: function () {\r\n                const displayValue = Math.floor(progressObj.value);\r\n                loadingText.textContent = displayValue;\r\n                currentDisplayPercent = displayValue;\r\n            },\r\n            onComplete: function () {\r\n                progressTween = null;\r\n            }\r\n        });\r\n\r\n        if (targetPercent >= 100) {\r\n            // 等待動畫完成後再執行隱藏動畫\r\n            gsap.delayedCall(0.5, () => {\r\n                gsap.timeline()\r\n                    .to(loadingScreen, {\r\n                        duration: 1,\r\n                        opacity: 0,\r\n                        ease: \"power3.in\"\r\n                    })\r\n                    .to(\r\n                        loadingScreen,\r\n                        { duration: 1, display: \"none\", ease: \"power1.inOut\" },\r\n                        \"<0.5\"\r\n                    );\r\n\r\n                if (typeof callback === 'function') {\r\n                    callback();\r\n                }\r\n\r\n            });\r\n        }\r\n    }\r\n\r\n    // 統一監聽函數\r\n    function listenResourceLoad(res) {\r\n        // 已經加載完成或可播放\r\n        if (\r\n            (res.tagName === \"IMG\" && res.complete) ||\r\n            (res.tagName === \"VIDEO\" && res.readyState >= 3)\r\n        ) {\r\n            loadedResources++;\r\n            updateProgress();\r\n        } else {\r\n            res.addEventListener(\"load\", () => {\r\n                loadedResources++;\r\n                updateProgress();\r\n            });\r\n            res.addEventListener(\"loadeddata\", () => {\r\n                loadedResources++;\r\n                updateProgress();\r\n            });\r\n            res.addEventListener(\"error\", () => {\r\n                loadedResources++;\r\n                updateProgress();\r\n            });\r\n        }\r\n    }\r\n\r\n    // 監聽所有資源\r\n    resources.forEach((res) => listenResourceLoad(res));\r\n\r\n    // 如果沒有資源，也直接跳到 100%\r\n    if (totalResources === 0) updateProgress();\r\n};\r\n","/**\r\n * 主入口檔案\r\n * 模組化版本 - 方便開發維護\r\n */\r\n\r\nimport { pageBanner } from \"./modules/pageBanner\";\r\nimport { pageTitle } from \"./modules/pageTitle\";\r\nimport { isMobile } from \"./modules/common/isMobile\";\r\nimport { headerScroll } from \"./modules/common/headerScroll\";\r\nimport { resourcesLoading } from \"./modules/common/resourcesLoading\";\r\n\r\nwindow.ucyCore = {\r\n    isMobile,\r\n    pageBanner,\r\n    pageTitle,\r\n    headerScroll,\r\n    resourcesLoading,\r\n};\r\n\r\nwindow.addEventListener(\"load\", function () {\r\n    ucyCore.headerScroll.init();\r\n\r\n    const parallax = document.querySelectorAll(\".ukiyo\");\r\n    new Ukiyo(parallax, {\r\n        scale: 1.1,\r\n        speed: 2,\r\n        willChange: true,\r\n        externalRAF: false\r\n    });\r\n});\r\n\r\n$('.hamburger').click(function (e) { \r\n    e.preventDefault();\r\n    $(this).toggleClass('is-active');\r\n    $('.header-box .link-box').toggleClass('active');\r\n});"],"names":[],"mappings":"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"}