!function(){"use strict";const t={bannerAniRepeat(t){gsap.timeline({yoyo:!0,repeat:-1}).fromTo(`${t} .banner-box .img-box img`,{scale:1},{duration:15,ease:"power1.inOut",scale:1.25})},bannerAni(t){gsap.timeline({onComplete:()=>this.bannerAniRepeat(t)}).from(`${t} .banner-box .img-box img`,{scale:1.3,opacity:0,duration:7})}},e={titleAni(t,e){const n=SplitText.create(`${t} .title-box .top .zh`,{type:"chars,words,lines",linesClass:"clip-text"}),o=SplitText.create(`${t} .title-box .bottom .en`,{type:"chars,words,lines",linesClass:"clip-text"});gsap.timeline({scrollTrigger:{trigger:`${t} .title-box`,start:"top 75%",once:!0,toggleActions:"play none none reverse"}}).from(n.chars,{duration:1,opacity:0,stagger:.1,y:80}).fromTo(o.chars,{opacity:0,rotationY:180,yPercent:100},{duration:1,opacity:1,rotationY:0,yPercent:0,stagger:.03},"<0.3").from(`${t} .title-box .top .line`,{duration:1,width:"0",opacity:0},"<0.45").call(function(){e&&e()},null,"-=1")}},n={init(){window.addEventListener("scroll",function(){const t=document.querySelector(".header");window.scrollY>50?t.classList.add("transparent"):t.classList.remove("transparent")})}};const o=new class{constructor(){this.vw=0,this.dvh=0,this.currentContext=null,this.breakpoint=1024,this.baseWidth={pc:1920,sp:768},this.contextChangeEvent=null,this.init()}init(){this.updateViewportSize(),this.setCurrentContext(),this.createContextChangeEvent(),this.bindResizeEvent(),window.rpx=this.rpx.bind(this),document.documentElement.classList.add("vwready"),console.log("âœ… Viewport initialized:",{vw:this.vw,dvh:this.dvh,context:this.currentContext})}updateViewportSize(){this.vw=document.body.clientWidth,window.vw=this.vw,document.documentElement.style.setProperty("--vw",`${this.vw}px`);const t=document.createElement("div");t.style.height="100dvh",t.style.position="fixed",document.body.append(t),this.dvh=t.offsetHeight,window.dvh=this.dvh,t.remove(),document.documentElement.style.setProperty("--dvh",`${this.dvh}px`)}setCurrentContext(){const t=document.body.clientWidth<this.breakpoint?"sp":"pc",e=this.currentContext&&this.currentContext!==t;this.currentContext=t,window.currentContext=t,e&&(window.dispatchEvent(this.contextChangeEvent),console.log("ðŸ”„ Context changed to:",t),location.reload())}createContextChangeEvent(){document.documentMode?(this.contextChangeEvent=document.createEvent("Event"),this.contextChangeEvent.initEvent("contextChange",!0,!0)):this.contextChangeEvent=new Event("contextChange")}bindResizeEvent(){let t=null;window.addEventListener("resize",()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.updateViewportSize(),this.setCurrentContext(),t=null},100)},!1)}rpx(t,e){const n=e||this.currentContext,o=this.baseWidth[n];return t*this.vw/o}getViewportInfo(){return{width:this.vw,height:this.dvh,context:this.currentContext,isMobile:"sp"===this.currentContext}}};window.ucyCore={isMobile:()=>window.matchMedia("(max-width: 1024px)").matches,pageBanner:t,pageTitle:e,headerScroll:n,resourcesLoading:t=>{const e=document.querySelector(".loading-screen"),n=document.getElementById("loading-text");if(!e)return gsap.delayedCall(.5,()=>{"function"==typeof t&&t()}),null;const o=[...Array.from(document.images),...Array.from(document.querySelectorAll("video"))],i=o.length;let r=0,s=0,a=null;function l(){let o=0===i?100:Math.floor(r/i*100);a&&a.kill();const l={value:s};a=gsap.to(l,{value:o,duration:.5,ease:"power1.out",onUpdate:function(){const t=Math.floor(l.value);n&&(n.textContent=t),s=t},onComplete:function(){a=null}}),o>=100&&gsap.delayedCall(.5,()=>{gsap.timeline().to(e,{duration:1,opacity:0,ease:"power3.in"}).to(e,{duration:1,display:"none",ease:"power1.inOut"},"<0.5"),"function"==typeof t&&t()})}o.forEach(t=>function(t){"IMG"===t.tagName&&t.complete||"VIDEO"===t.tagName&&t.readyState>=3?(r++,l()):(t.addEventListener("load",()=>{r++,l()}),t.addEventListener("loadeddata",()=>{r++,l()}),t.addEventListener("error",()=>{r++,l()}))}(t)),0===i&&l();const c={show:()=>{e&&gsap.set(e,{display:"flex",opacity:1})},hide:()=>{e&&gsap.timeline().to(e,{duration:1,opacity:0,ease:"power3.in"}).to(e,{duration:1,display:"none",ease:"power1.inOut"},"<0.5")},reset:()=>{r=0,s=0,n&&(n.textContent=0),a&&(a.kill(),a=null)},setProgress:t=>{n&&(n.textContent=Math.floor(t)),s=t},getState:()=>({loadedResources:r,totalResources:i,currentPercent:s,targetPercent:0===i?100:Math.floor(r/i*100)}),element:e};return"undefined"!=typeof window&&(window.loadingScreenController=c),c},viewport:o},"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.addEventListener("load",function(){window.scrollTo(0,0),ucyCore.headerScroll.init();const t=document.querySelectorAll(".ukiyo");new Ukiyo(t,{scale:1.1,speed:2,willChange:!0,externalRAF:!1})}),$(".hamburger").click(function(t){t.preventDefault(),$(this).toggleClass("is-active"),$(".header-box .link-box").toggleClass("active")})}();
